# Codex (OpenAI GPT-5.2) の批評

### 結論（最初に明言）
六十四卦マッピング計画v3.1は**計画として不合格である**。理由は、(1)「MECE化」を達成しておらず情報欠落を誤分類する設計、(2) `pre_outcome_text` 切り出しが**行動情報を破壊**して分類の根拠を消す、(3) サンプリング・評価・成功指標が**数理的に整合しない**、(4) 「卦番号・爻」の付与規則が欠落しており**完成物が定義されていない**からである。

### 批判的分析
- **論理的整合性が崩れている**
  - 「MECE化」は誤りである。優先順位で強制的に1カテゴリへ押し込むだけで、カテゴリ間の重なりは消えない。例：「外部環境変化が原因で内部危機が顕在化」した事例は `T_ENVIRONMENT` と `T_INTERNAL_CRISIS` が同時に成立する。優先順位は便宜でありMECEの証明ではない。
  - 判定フローの最終分岐が誤りである。`T_INTERACTION` と `A_PAUSE` を「上記以外」の受け皿にすると、**情報不足**（trigger/actionが文中に書かれていない）を「相互作用」「静観」と誤分類する。これは体系的ノイズを注入する設計である。
  - Phase3が自己矛盾である。「LLM抽出500件パイロット」に対して「精度評価」を置いているが、500件の正解ラベル作成工程が存在しない。評価は実行できない。
  - 成功指標が数理的に矛盾している。卦一致は「trigger一致」かつ「action一致」が同時に起きた場合のみ成立する。目標が trigger70%・action65%なら、卦一致の上限は **0.70×0.65=45.5%** である（独立近似でなくても60%を標準目標に置く根拠がない）。Phase2の「卦一致率≥60%」は目標設計として破綻している。
  - 「抽出失敗（該当なし等）」を品質指標に置いているのに、プロンプトに「該当なし」選択肢がない。失敗定義が成立しない。
  - Phase5の「最大約200件」は誤りである。提示コードは全64卦が頻出なら **5×64=320件** を返す。希少卦を全件にするとさらに増える。工数見積も連鎖して破綻する。

- **実装設計（Phase1）が致命的に間違っている**
  - `extract_pre_outcome` は「結果語」より前で切るが、文構造が「X、その結果、Y（対応行動）」のとき **Yを丸ごと削除**する。action抽出の入力からaction根拠を消す設計である。
  - `earliest_pos < 100` のとき先頭200文字を返す仕様は、結果語を含むケースで**結果語を温存**し、リーク対策としても無効である。
  - 「リーク」という問題設定自体がずれている。ここで作るラベルは trigger/action であり、結果語はラベルそのものではない。必要なのは「結果語に引きずられた判断を禁止する注釈手順」であって、本文破壊ではない。

- **サンプリングが評価を歪める**
  - `estimate_trigger_candidates` による仮分類→そこから抽出は、典型例（キーワードが強い事例）に偏る。κもLLM一致率も**過大評価**になる。実運用で最も失敗する曖昧事例が評価集合から消える。
  - triggerで層化しているのに action のカバレッジ設計がない。action側の一致度評価は設計上不安定になる。

- **新規性の主張は成立しない**
  - 「注釈ガイドライン＋LLM分類＋集計」は既存の定番手法である。新規性は「八卦への対応」だけだが、その対応は理論根拠・反証可能性・比較実験が欠落しており、研究としての新規性ではなく任意対応である。

- **スケーラビリティは“計算量”ではなく“品質”で破綻する**
  - 12,871件にLLMを回す計算はできる。しかし、(1)情報欠落の強制分類、(2)本文切り落とし、(3)曖昧事例を避けた評価、の3点で品質が崩れ、件数が増えるほど誤分類が累積する。
  - 「卦の分布は品質指標ではない」としつつ、偏り検知のガードレールがない。LLMが特定カテゴリへ寄るだけで、卦分布が崩れても検知できない。

- **反例・エッジケース（この設計が破綻する具体例）**
  1. 「売上が急減。その結果、コスト削減を断行」→ `pre_outcome_text` が action を削除し、action分類不能になる。  
  2. 「成功モデルとして導入」「成功体験に固執」→ 「成功」が結果語ではなく文脈語で、切り出しが誤作動する。  
  3. 「撤退しつつ新規投資」「集中と提携を同時実施」→ actionが単一クラスに収まらず、優先順位で情報を捨てる。  
  4. 「規制強化（外部強制）で品質問題（内部危機）が顕在化」→ triggerが単一に決まらず、優先順位が“真因”を潰す。  
  5. 「意思決定延期（静観）しながら品質維持」→ `A_PAUSE` と `A_MAINTAIN` が同時成立し、定義が衝突する。  
  6. trigger/actionが本文に書かれていない短文要約→ `T_INTERACTION` / `A_PAUSE` に吸い込まれ、データが汚染される。

- **代替案との比較（より優れた設計が存在する）**
  - 必須修正は以下である（これを満たさない計画は成立しない）。
    1. **情報不足ラベルを導入**：`T_UNKNOWN` / `A_UNKNOWN` を明示し、64卦へ強制マッピングしない（欠損として別扱い）。  
    2. **本文切り出しを廃止**：結果語の削除ではなく、注釈者/LLMに「trigger根拠スパン」「action根拠スパン」を必ず出させる。根拠スパンが取れないならUNKNOWNに落とす。  
    3. **評価設計を再構築**：64件は少なすぎる。最低でも二重ラベル200件級（曖昧事例を意図的に含む）を作り、Krippendorff’s α（名義）で全体一致を測る。  
    4. **成功指標を整合させる**：卦一致率は trigger/action 一致率の関数であり、60%を置くならtrigger/action目標を同時に引き上げるか、卦一致の採点法を変える。  
    5. **爻の付与規則を定義するか削除**：現状は成果物未定義である。爻を付けるなら「どの情報からどの規則で6段階を決めるか」を先に固定する。無理なら卦のみで完結させる。  
    6. **層化はtrigger×action×曖昧度**：キーワード典型例だけを集める層化は評価として無効である。

### Claudeの意見への反論/修正
- Claudeの「v3批評を全反映したv3.1」は誤りである。**形式的に項目を足しただけで、設計矛盾が残ったまま**だからである。特に `pre_outcome_text` の切り出し設計、Phase3の評価不能、卦一致率目標の不整合、UNKNOWN欠落、爻未定義は致命傷である。
- 正しい点もある。優先順位の明示、二重ラベリング、α導入、固定10件/卦の撤廃は改善である。しかし、これらは「破綻を遅らせる」だけで「成立させる」変更ではない。

### より正確な見解
この計画の本質的な問題は、「六十四卦」という固定枠に合わせて**現実の複合事例を単一ラベルへ圧縮**し、その圧縮誤差を `T_INTERACTION` / `A_PAUSE` に押し込んで隠す点にある。ここを直さない限り、出力は一見整然としても中身は誤分類だらけになる。

成立させる最短ルートは次である：
- **目的を固定**：「64卦に全件を必ず割り当てる」を捨て、「根拠が取れる事例だけを高精度に割り当てる」へ変更する。  
- **根拠スパン必須＋UNKNOWN導入**で、評価・改善・監査を可能にする。  
- **評価集合を曖昧事例中心に作り直し**、成功指標を数理整合させる。  
- **爻は削除**（もしくは別タスク化）して、まず64卦マッピングの妥当性を確立する。

この修正を入れないv3.1は、実装しても「動くが使えない分類器」を量産するだけである。
