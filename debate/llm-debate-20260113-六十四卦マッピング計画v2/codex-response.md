# Codex (OpenAI GPT-5.2) の批評

### 結論（最初に明言）
このv2計画は「決定表で一意に卦を割り当てる」実装はできるが、**研究計画としては不合格である**。理由は明確で、**(1) 64卦を名乗りながら決定表が8卦を網羅していない、(2) 循環論法排除が手続きとして成立していない、(3) 評価指標が誤っており調整がデータ汚染になる**からである。

### 批判的分析
- **論理的整合性が破綻している（64卦の前提違反）**  
  下卦決定表が7トリガーしかなく、**下卦「乾」が生成されない**。したがってこの設計は最大でも7×8=56通りしか生成できず、**「六十四卦マッピング」「完全列挙」は虚偽である**。
- **「完全列挙で曖昧さゼロ」という主張が未達**  
  上下卦→卦番号（1〜64）の対応表（採用する配列順の明示）が提示されていない以上、実装者が異なる番号体系を採用できる。よって**再現性は担保されない**。
- **時系列（time_position）とprimary選択規則が矛盾している**  
  `primary_action = actions[0]` としつつ `time_position` はケース全体に1個だけ付与している。複数アクションがあるケースで、**「最初のアクション」と「後期（T3_late）」が同時に選ばれる**。これは「どの時点の行為を上卦にするのか」という意味論が崩壊しており、**爻位が“いつ”を表すのに、上卦が“別のいつ”を表す**という内的矛盾である。
- **循環論法排除が手続きとして成立していない（リーク対策ゼロ）**  
  「outcomeを入力から除外」しても、抽出対象テキストに成功/失敗などの結果記述が含まれるなら、LLM抽出も人手ラベリングも結果情報に影響される。これは**アウトカムがラベルを経由してマッピングに混入する**構造であり、「完全排除」は成立しない。
- **一致度・精度評価の設計が誤りである**  
  `triggers/actions` はリスト（多ラベル＋順序）なのに「Cohen’s κで合格」を掲げている。κは単一カテゴリの一致を測る指標であり、**リスト一致を適切に表現しない**。さらに「一致率≥75%」はクラス不均衡下で無意味になり（多数派を出すだけで達成できる）、**成功指標として無効**である。
- **分布偏りを品質指標にするのは誤りである**  
  「最大卦≤30%」「1卦に50%以上集中なら見直し」は、データの実態（外部ショックが多い等）を“悪”とみなし、決定表を調整して分布を整える誘因になる。これは測定の都合でラベル体系を変える行為であり、**結果の比較可能性を破壊するデータ汚染である**。
- **新規性がない（ただの再符号化）**  
  この計画は trigger/action/time/scale を、易経ラベル（震・坤など）へ決定表で写像するだけである。統計的に見れば**説明変数の再コーディング**であり、易経を持ち込むことで新しい情報が増えない。差分は「記号体系が易経風」というだけで、**手法として新規ではない**。
- **スケーラビリティが設計されていない**  
  トリガー/アクションの辞書は必ず増える。カテゴリ追加のたびに決定表も変わり、`mapping_version` を上げても、**異なるバージョン間で分布も結論も非比較**になる。運用上のコストは42時間見積から漏れている。
- **エッジケースで必ず破綻する**  
  複合トリガー（規制変更＋外部ショック）、複合行為（撤退→投資）、段階が循環する事例、スケールが混在する事例に対し、「先頭をprimary」は情報を捨てるだけで、**恣意的な1点代表**になる。

### Claudeの意見への反論/修正
- 正しい点はある。v1の「結果含意のラベル」「事後語のchange_stage」「未定義f()」を捨て、決定表と時系列語彙に寄せたことは**再現性の方向として正しい**。
- ただしClaudeの評価は甘い。**命名変更は本質ではない**。本質は「(A) 64卦を網羅できていない」「(B) アウトカムリークを遮断できていない」「(C) 指標が無効で、調整がデータ汚染になる」の3点で、これらはv2でも未解決である。
- 「決定表を完全列挙した」は誤りである。列挙しているのは一部の対応だけで、しかも8卦すら揃っていない。**“決定表化＝妥当化”ではない**。

### より正確な見解
- この企画を成立させる最短ルートは、目的を二択で固定することだ。  
  1) **予測・因果を語りたい**なら、易経は装飾ではなく検証対象である。決定表は事前固定し、**アウトカムを含む文を除去した入力**で抽出し、trigger/actionを直接使うベースライン（回帰・木・単純集計）に対して**追加価値が出ない限り「易経マッピングは無意味」**と結論する設計に変える。  
  2) **索引・物語化をしたい**なら、outcomeとの統計連関を主要成果に据えるのをやめ、専門家評価（適合度レビュー）を主要指標にする。統計は補助に落とす。
- 仕様として必須の修正は以下である。  
  - **8卦を必ず網羅**し、64卦を名乗るなら全組合せが生成される設計にする（現状は56止まり）。  
  - `time_position` をケースに1個ではなく、**（trigger/actionのペア）ごとのイベント単位**に持たせる。そうしない限り「爻位＝時点」の意味が壊れる。  
  - κを使うなら、`primary_trigger/primary_action/time_position/scale` の**単一カテゴリ**に限定する。リスト一致は別指標で測るか、そもそもリストを捨てて「primaryだけ」を設計要件にする（現状は収集して捨てている）。  
  - 分布（最大卦≤30%）を合格指標から削除する。分布はデータの性質であり、**品質指標ではない**。  

このv2は「再現可能な符号化」には近づいたが、**妥当性・非リーク・網羅性・評価指標**の4点が欠けている。ここを直さずに進めるのは時間の浪費である。
