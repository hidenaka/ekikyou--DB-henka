# Claude (Anthropic) の見解

## 改善計画v12（6爻ビット構造ノイズモデル版）

### v11からの変更点
- 疎64×64混同行列 → **6爻ビット反転ノイズ + 一様誤り**
- ゴールド30件64卦均等 → **識別性アンカー20件（構造対立例）**
- 注釈重なり未設計 → **3名全員が全サンプル注釈（full overlap）**
- 校正分割未定義 → **明示的3分割（Train 168/Cal 56/Test 56）**
- 上卦/下卦階層 → **6爻自己回帰モデル（非独立）**
- conformal → **外す（保証できないから、Bootstrap CIで代替）**

### 核心設計

**1. 6爻ビット反転ノイズモデル**
- 各注釈者の誤りを「爻の取り違え」としてモデル化
- パラメータ数: 7 × n_annotators（flip_prob 6 + uniform 1）
- v11の512/注釈者より大幅削減
- 「1爻違い」が自然に高確率、恣意的「近傍」定義不要

**2. 6爻自己回帰予測（非独立）**
- P(bits|x) = Π P(bj|x, b1,...,bj-1)
- v9の独立仮定（Π P(bj|x)）を修正
- 爻間の依存関係を学習

**3. 識別性アンカー（構造対立例）**
- 各爻について陽/陰が明確なケース（6×2=12件）
- 上卦/下卦の対立例（8件）
- 合計20件でノイズモデルの識別性確保

**4. 注釈設計（full overlap）**
- 3名全員が全300件を注釈
- 注釈者バイアスの分離に必要
- 同一サンプルで注釈者間比較

**5. 3分割厳密化**
- Train 168件（モデル学習）
- Cal 56件（校正・閾値）
- Test 56件（最終評価、ロック）

### 評価設計
- ベースライン: prior_only, independent_6bit, majority_vote, RF_64class
- 指標: NLL, Hamming_loss, Top5_accuracy
- 停止条件: prior/independentより悪ければ再検討

### 工数: 200h
- Phase 1 設計: 40h
- Phase 2 ゴールド+注釈: 100h
- Phase 3 モデル構築: 60h

### フォールバック
- 自己回帰が独立より悪い → 独立6爻に戻す
- α<0.3 → 上卦/下卦（2×3ビット）に簡素化