# LLM Debate: 六十四卦マッピング改善計画v1

## 議題
六十四卦マッピング改善計画v1

## Claude (Anthropic) の見解
前回Codex批評を受け、改善計画を策定。(1)不明ラベルT_UNKNOWN/A_UNKNOWN導入、(2)信頼度スコア0.0-1.0付与、(3)人手アノテーション100件でκ≥0.6を目標、(4)爻をプロセス段階ベースに再設計、(5)易経意味論との対応表作成。合計21時間で外的妥当性を検証可能な状態にする。

## Codex (OpenAI GPT-5.2) の批評
### 結論（最初に明言）
この改善計画v1は**採択不可である**。なぜなら、(1)「外的妥当性の検証」に必要な設計要件（評価指標・検証プロトコル・ゴールドデータ）が欠落し、(2)提示した confidence と unknown が“数値化の体裁”に留まり、(3)爻の再設計と易経意味論チェックが論理的に衝突し、(4)工数見積が必須工程を意図的に落としているからである。

### 批判的分析
**1. 論理的整合性（矛盾）**
- Step2の confidence は「確率」でも「信頼度」でもない。`(マッチ数)/(最大キーワード数)` は根拠を持たず、信頼度と呼ぶのは誤りである。なぜなら、識別力（その語がどれだけそのカテゴリに特有か）を無視し、カテゴリ側の“キーワード数の多寡”でスコアが決まるからである。
- Step1の unknown も検証設計がない限り“誤分類の隠蔽”で終わる。なぜなら、unknown を正解として扱う基準（どの入力が unknown であるべきか）が定義されていないため、失敗を unknown に逃がせるからである。
- Step4（爻＝プロセス段階）と Step5（各卦の卦辞・爻辞との整合性確認）は同時に成立しない。なぜなら、爻辞は各卦の文脈依存の具体的助言であり、全卦共通の一般工程表（初＝情報収集…上＝移行）に還元した時点で、個別爻辞との整合性を厳密に検証できないからである。整合させる方法は「爻辞側を都合よく解釈し直す」しかなく、検証ではなく合理化になる。

**2. 実現可能性（技術・実務）**
- Step1の「ヒット数閾値」は設計として未完成である。なぜなら、文の長さ・同義語・否定・重複出現でヒット数が簡単に変動し、閾値が入力長に依存する欠陥を避けられないからである。
- Step3は「100件・2名・κ≥0.6」で外的妥当性の検証可能状態にならない。なぜなら、(a) 64卦＋6爻（しかも trigger/action/爻の3ラベル）という高分割ラベル空間に対して100件は統計的に薄すぎ、(b) κは分布に強く依存し、クラス不均衡下で“低κでも運用上十分”“高κでも体系が間違い”が普通に起きるからである。さらに、爻は順序尺度なので単純κではなく重み付きκ等の設計が必須である。
- Step5「対応表作成→不整合なら定義修正」は循環論法である。なぜなら、基準（易経意味論）に合わせて定義を動かすと、結果が常に“整合したことにできる”ため、反証可能性が消えるからである。

**3. 新規性の真偽**
- unknown 追加、confidence 付与、人手アノテ、κ評価は品質管理の定石であり新規性はない。差分は「易経ドメインに当てはめた」だけで、手法として新しいとは言えない。

**4. スケーラビリティ**
- キーワードベースの延命であり、運用コスト問題を解決していない。なぜなら、語彙揺れ・同義語・ドメイン拡張のたびにキーワード辞書が肥大し、メンテ不能になる構造が維持されるからである。
- unknown と低confidenceの“要確認”はデータ増加とともにレビュー負荷が線形増加する。自動化（学習・キャリブレーション・能動学習）が入らない限り破綻する。

**5. 反例・エッジケース（破綻点）**
- 1件に複数段階が混在する記述（計画も実行も結果も含む）では、単一爻に落とす設計が破綻する。これは例外ではなく実データの標準形である。
- 否定（「進めない」「やめる」）や対比（「AではなくB」）でキーワードが逆向きに働き、confidence が上がるほど誤る構造が残る。
- 汎用語が多いカテゴリほど誤ヒットし、Step2の式では“キーワード数が少ないカテゴリ”が不当に高confidenceになる。

**6. 代替案との比較（より優れた設計が存在する）**
- ルールの上に疑似スコアを載せるより、少数ラベルで確率を出す分類器＋キャリブレーション＋棄却（abstain）を作る方が、説明可能性と運用品質が両立する。
- さらに、能動学習（低マージン・高不確実・高影響カテゴリから優先アノテ）を入れるのが最短である。無作為100件より情報量が高い。

### Claudeの意見への反論/修正
- 「21時間で外的妥当性を検証可能な状態」は誤りである。なぜなら、外的妥当性の最低条件は(1)明確な評価指標、(2)独立した検証データ、(3)ゴールド基準（合意形成・裁定）であり、計画v1は(3)を欠き、(1)(2)も書かれていないからである。
- 「confidence_score 0.0–1.0付与」は見た目だけの改善である。なぜなら、その式は確率でも信頼度でもなく、意思決定（要確認/自動確定）に使うと誤誘導するからである。
- 「κ≥0.6を目標」は甘い以前に不適切である。なぜなら、対象が多クラス・不均衡・順序尺度を含む複合ラベルであり、単一のκ閾値で品質判定する設計が間違いだからである。
- 正しい方向性は2点だけ認める。(1) unknown（棄却）を導入して誤確定を減らす発想、(2) 人手アノテと一致度で“人間同士が揃うか”を測る姿勢。この2点は必要条件である。

### より正確な見解
本質は「易経らしさ」ではなく、まず**再現可能なラベル体系と検証可能な分類器**を作ることである。そのうえで易経意味論は“解釈レイヤ”として載せるべきである。修正版の最小計画は以下である。

1. **タスク定義を固定**：入力→(trigger, action, 爻)なのか、入力→(卦, 爻)なのかを一意にし、unknown の正義条件（どの状態を棄却と呼ぶか）を明文化する。  
2. **アノテ設計を先に作る**：ラベルガイドライン、例、裁定手順（不一致の決着）を作り、パイロット20件で破綻点を潰す。  
3. **ゴールドセットを作る**：100件ではなく、少なくとも“難例中心”で増やし、2名＋裁定で確定ラベルを作る。爻は順序尺度として重み付き一致度で評価する。  
4. **confidence を“校正された確率＋マージン”に置換**：カウント比ではなく、検証データ上でしきい値を決める（精度とカバレッジのトレードオフを数値で管理）。unknown は“逃げ道”ではなく“性能曲線の一部”として評価する。  
5. **易経意味論は最後に検証**：分類の妥当性を実測で固めた後、卦辞・爻辞との整合は反証可能なチェックリスト（この条件なら不整合と判定）で行う。定義修正はログ化し、恣意的整合を禁止する。  

この順序に変えない限り、計画v1は「それっぽい改善」で終わり、誤分類の根絶にも易経的妥当性にも到達しない。


## 統合分析

### 共通点
1. **unknown（棄却）導入の方向性は正しい**: 誤確定を減らす発想は必要条件
2. **人手アノテーションで一致度を測る姿勢は正しい**: 「人間同士が揃うか」の検証は必須
3. **現状のキーワードベースには限界がある**: 両者とも認識している

### 相違点

| 観点 | Claude（改善計画v1） | Codex |
|------|---------------------|-------|
| confidence計算 | キーワード比率 | 校正された確率＋マージン |
| アノテーション規模 | 100件 | 難例中心で増やす |
| κの扱い | 単一閾値(≥0.6) | 爻は重み付きκ、複合評価 |
| 爻の設計 | プロセス段階で統一 | 爻辞は卦依存、統一不可 |
| 易経意味論 | 同時に検証 | 分類妥当性確立後に検証 |

### Codexの批評への対応

Codexの指摘は**本質的に正しい**。特に：

1. **confidence式の欠陥**: 識別力を無視した単純カウント比は「信頼度」ではない
2. **Step4とStep5の矛盾**: 爻を汎用プロセス段階に還元すると、卦ごとの爻辞との整合性検証が不可能になる
3. **循環論法の危険**: 「整合しないなら定義修正」は反証可能性を消す
4. **100件では統計的に不十分**: 64卦×6爻×3ラベルの空間には薄すぎる

### 結論・推奨

**改善計画v1は採択不可**。Codexの提案する修正版計画を採用する：

| # | タスク | 目的 |
|---|--------|------|
| 1 | **タスク定義の固定** | 入力→出力の仕様、unknownの正義条件を明文化 |
| 2 | **アノテ設計を先行** | ラベルガイドライン＋パイロット20件で破綻点を潰す |
| 3 | **ゴールドセット作成** | 難例中心、2名＋裁定、爻は重み付きκ |
| 4 | **confidenceを校正確率に置換** | 検証データでしきい値決定 |
| 5 | **易経意味論は最後** | 反証可能なチェックリストで検証 |

**設計原則の変更**:
- ❌ 「キーワードベースの延命」
- ✅ 「再現可能なラベル体系と検証可能な分類器を先に作り、易経意味論は解釈レイヤとして後から載せる」

---
*生成日時: 2026-01-13T22:36:32.111Z*
*統合分析追加: 2026-01-14*
