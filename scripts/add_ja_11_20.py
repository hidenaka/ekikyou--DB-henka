#!/usr/bin/env python3
"""卦11-20の日本語訳を追加"""
import json, copy

TRANSLATIONS = {
    "11": {
        "judgment": "順調に物事が進む時期です。小さなものが去り、大きなものが来る流れにあります。積極的に動くことで、良い結果が期待できます。",
        "tuan": "天と地が交わり、万物が通じ合う時期です。上下が心を通わせ、同じ方向を向いています。内に強さを持ち、外に柔軟さがあることで、バランスの取れた発展ができます。",
        "xiang": "天地が交わる時期です。限りない恩恵を人々に施し、サポートしていくことが大切です。",
        "lines": {
            "1": {"text": "仲間と共に前進することで、良い結果が生まれます。根っこでつながった存在と共に動くことが吉です。", "xiang": "外に向かって進もうとする志があることで、吉が生まれます。"},
            "2": {"text": "困難な人にも寛容に接し、遠くのことも忘れずにいることが大切です。偏らない姿勢で中道を歩むことで、良い結果につながります。", "xiang": "寛容さを持って中道を歩むことで、輝かしい成果が得られます。"},
            "3": {"text": "平穏な状態は永遠には続きません。去ったものは戻り、困難もやがて訪れます。それを理解した上で、今の幸せを大切にすることが重要です。", "xiang": "去ったものが戻るのは、天地の道理です。"},
            "4": {"text": "謙虚な姿勢で周囲と協力することで、良い結果が生まれます。誠意を持って接することが大切です。", "xiang": "皆が本来の場所を離れている状態です。誠意があれば、心から願いが叶います。"},
            "5": {"text": "控えめな姿勢で良縁を結ぶことで、大きな幸せが訪れます。中心にいて願いを実現できる時期です。", "xiang": "中心にいることで、願いを叶えられます。"},
            "6": {"text": "築いたものが崩れる時期が来ています。無理に動かず、身近なところから立て直すことが必要です。", "xiang": "命令が乱れている状態です。"}
        }
    },
    "12": {
        "judgment": "物事が停滞しやすい時期です。大きなものが去り、小さなものが来る流れにあります。無理に動くより、時を待つ姿勢が大切です。",
        "tuan": "天と地が交わらず、万物が通じ合わない時期です。内に弱さ、外に強さがあり、バランスが崩れています。この時期は堅実に守りを固めることが重要です。",
        "xiang": "天地が通じ合わない時期です。徳を内に秘め、難を避けることが賢明です。",
        "lines": {
            "1": {"text": "仲間と共に正しい道を守ることで、吉が生まれます。志を同じくする人と協力することが大切です。", "xiang": "志が上の人に向いていることで、吉が生まれます。"},
            "2": {"text": "忍耐強く待つことで、良い結果につながります。小さな人は順応し、大きな人は困難に向き合うことで道が開けます。", "xiang": "混乱に巻き込まれないことが大切です。"},
            "3": {"text": "恥ずかしい状況にあるかもしれませんが、今は耐える時期です。", "xiang": "位置が適切でないことによる困難です。"},
            "4": {"text": "天の命に従って動くことで、問題は避けられます。仲間と共に幸せを分かち合える時期が来ます。", "xiang": "志を実行できる時期です。"},
            "5": {"text": "停滞を終わらせる力がある時期です。油断せず、常に危機感を持つことで、安定した状態を維持できます。", "xiang": "正しい位置にいることで、大きな吉が生まれます。"},
            "6": {"text": "停滞が終わり、喜びが訪れる時期です。最初は困難でも、後には良い結果が待っています。", "xiang": "停滞は永遠に続くものではありません。"}
        }
    },
    "13": {
        "judgment": "人と心を合わせることが大切な時期です。広い視野で人と結びつくことで、大きな成果が期待できます。正しい道を歩むことで、困難も乗り越えられます。",
        "tuan": "柔らかさが中心にあり、強さに応じています。文明と強さ、そして中正さを持っているからこそ、人と心を合わせられます。",
        "xiang": "天と火が共にある形です。それぞれの違いを認め、適材適所で物事を進めることが大切です。",
        "lines": {
            "1": {"text": "門を出て人と結びつくことで、問題は生じません。開かれた姿勢で人と接することが吉です。", "xiang": "門を出て人と結びつくことを、誰が咎めるでしょうか。"},
            "2": {"text": "身内だけで固まると、後々問題が生じやすいです。より広い視野で人と結びつくことが大切です。", "xiang": "身内だけで結びつくと、後悔の道につながります。"},
            "3": {"text": "警戒して動きを控える時期です。相手が強い場合は、長い間待つことも必要です。", "xiang": "相手が強いため、しばらく動かないことが賢明です。"},
            "4": {"text": "攻撃する準備はあっても、実行しないことが吉です。困難な状況でも、正しい道に戻ることで良い結果につながります。", "xiang": "困難にあっても正しい道に戻ることが大切です。"},
            "5": {"text": "最初は苦しくても、最後には笑いがあります。大きな力で困難を乗り越え、仲間と再会できます。", "xiang": "中心にいて正直であることが力になります。"},
            "6": {"text": "郊外で人と結びつく段階です。後悔はありませんが、まだ目標は完全には達成されていません。", "xiang": "志がまだ完全には実現していません。"}
        }
    },
    "14": {
        "judgment": "大きな成果を得られる時期です。多くのものを持ち、それを活かせる位置にいます。順調に物事が進む流れにあります。",
        "tuan": "柔らかさが中心の高い位置にあり、上下がそれに応じています。強さと文明さを持ち、天に応じて時に従って動くことで、大きな成功が得られます。",
        "xiang": "火が天の上にある形です。悪を抑え、善を広めることで、天の恵みに応えることができます。",
        "lines": {
            "1": {"text": "問題を引き起こさないように、困難を意識しながら進むことで、過ちを避けられます。", "xiang": "害のあることに近づかないことが大切です。"},
            "2": {"text": "大きな荷物を運べる力があります。どの方向に進んでも問題ありません。蓄えた力で失敗を避けられます。", "xiang": "中心に蓄えがあることで、失敗を避けられます。"},
            "3": {"text": "高い地位の人に仕えることができる時期です。ただし、謙虚さを忘れると問題が生じます。", "xiang": "高い地位に仕えることは、小さな器では難しいです。"},
            "4": {"text": "持っている力を誇示せず、控えめにすることで問題を避けられます。賢明な判断ができる時期です。", "xiang": "控えめにすることで、明確な判断ができます。"},
            "5": {"text": "誠実さが周囲に伝わり、威厳も備わる時期です。信頼関係を築くことで、良い結果につながります。", "xiang": "誠実さが志を呼び起こします。威厳があれば準備を怠りません。"},
            "6": {"text": "天からの助けがある時期です。全ての面で有利に物事が進みます。", "xiang": "天からの助けによって、大きな吉が生まれます。"}
        }
    },
    "15": {
        "judgment": "謙虚さが成功への鍵となる時期です。控えめな姿勢を保つことで、物事が順調に進み、良い結果を得られます。",
        "tuan": "天は高いものを減らし、低いものを増やします。地は高いところから低いところへ流します。謙虚さは人に好まれ、栄光をもたらします。",
        "xiang": "地の中に山がある形です。多いところから少ないところへ分け与え、バランスを取ることが大切です。",
        "lines": {
            "1": {"text": "謙虚さに謙虚さを重ねることで、どんな困難も乗り越えられます。自分を低く保つことで、徳を養えます。", "xiang": "謙虚に自分を養うことが大切です。"},
            "2": {"text": "謙虚さが周囲に認められる時期です。正しい道を守ることで、吉が生まれます。", "xiang": "心の中に謙虚さがあることで、良い結果が生まれます。"},
            "3": {"text": "功績がありながらも謙虚な人は、最後まで良い結果を得られます。多くの人がついてきます。", "xiang": "功績がありながら謙虚であれば、多くの人が従います。"},
            "4": {"text": "あらゆることが有利に進みます。謙虚さをさらに発揮することで、道理に反しません。", "xiang": "謙虚さを発揮することは、道理に合っています。"},
            "5": {"text": "財力がなくても、謙虚さで周囲の協力を得られます。必要であれば行動を起こすことも可能です。", "xiang": "服従しない者を正すことができます。"},
            "6": {"text": "謙虚さが周囲に知れ渡っています。行動を起こすことで、身近な問題を解決できます。", "xiang": "志がまだ完全には達成されていませんが、行動で解決できます。"}
        }
    },
    "16": {
        "judgment": "喜びと調和が満ちる時期です。リーダーを立て、行動を起こすことが有利です。時宜を得た動きが成功につながります。",
        "tuan": "強さが応じられ、志が実行される時期です。順序立てて動くことで、天地も従い、万物が育ちます。",
        "xiang": "雷が地から出る形です。先人たちは音楽を作り、徳を讃えました。調和を大切にする時期です。",
        "lines": {
            "1": {"text": "喜びを大げさに表現すると、問題が生じます。控えめにすることが吉です。", "xiang": "志が行き過ぎると、凶になります。"},
            "2": {"text": "岩のように堅実で、事が起こる前に察知できる人は吉です。中正であることで、良い結果が生まれます。", "xiang": "中正であることで、吉が生まれます。"},
            "3": {"text": "上を見上げて喜びを求めると、後悔することになります。早めに気づくことが大切です。", "xiang": "位置が適切でないことによる問題です。"},
            "4": {"text": "喜びの源となる人は、大きな成果を得られます。疑いを持たなければ、仲間が集まってきます。", "xiang": "志が大きく実現する時期です。"},
            "5": {"text": "困難な状況でも持ちこたえられます。中心にいることで、過去の恵みが消えていません。", "xiang": "強いものの上に乗っている状態です。"},
            "6": {"text": "暗い中で喜びを求めても、長続きしません。途中で方向を変えれば、問題を避けられます。", "xiang": "最上位での喜びは、長く続きません。"}
        }
    },
    "17": {
        "judgment": "流れに従うことが大切な時期です。正しい道を守りながら柔軟に対応することで、問題を避けられます。",
        "tuan": "強いものが来て、柔らかいものの下に置かれる形です。動きと喜びがあり、時に従うことで大きな成功が得られます。",
        "xiang": "沢の中に雷がある形です。日が暮れたら休息を取り、自然のリズムに従うことが大切です。",
        "lines": {
            "1": {"text": "目標が変わっても、正しい道を守れば吉です。門を出て交流することで、成果が得られます。", "xiang": "正しい道に従うことで、吉が生まれます。"},
            "2": {"text": "若い者に執着すると、経験ある者との関係を失います。どちらを選ぶか、慎重に考えることが必要です。", "xiang": "両方を同時に得ることはできません。"},
            "3": {"text": "経験ある者を選び、若い者を手放すことで、求めるものが得られます。堅実さを保つことが有利です。", "xiang": "志を決めて、下を捨てることで道が開けます。"},
            "4": {"text": "従う者を得ますが、正しくあっても問題が生じやすい時期です。誠実さと明確さを持つことで、過ちを避けられます。", "xiang": "誠実さを持って道を示すことが、成果につながります。"},
            "5": {"text": "良いものを信じることで、吉が生まれます。正しい位置にいることで、良い結果が得られます。", "xiang": "中正であることで、吉が生まれます。"},
            "6": {"text": "強く結びつき、さらに維持される関係があります。深い信仰心を持って山で祭りを行うように、誠実さが大切です。", "xiang": "頂点に達した時期です。"}
        }
    },
    "18": {
        "judgment": "積み重なった問題を解決する時期です。大きな行動を起こすことが有利ですが、前後の準備と対応を忘れないことが大切です。",
        "tuan": "強いものが上にあり、柔らかいものが下にある形です。従順に止まることで、問題が解決に向かいます。終わりは新しい始まりにつながります。",
        "xiang": "山の下に風がある形です。人を救い、徳を育むことが求められる時期です。",
        "lines": {
            "1": {"text": "先代の問題を引き継いで解決する時期です。有能な後継者があれば、先代の過ちも許されます。困難でも最終的には吉です。", "xiang": "先代の仕事を引き継ぐ気持ちで取り組むことが大切です。"},
            "2": {"text": "母親的な問題を解決する時期です。ただし、厳しすぎず、中道を守ることが重要です。", "xiang": "中道を守ることで、解決につながります。"},
            "3": {"text": "先代の問題に取り組む中で、小さな後悔はあっても大きな過ちはありません。", "xiang": "最終的には問題ありません。"},
            "4": {"text": "先代の問題を放置すると、後で困ることになります。早めに対処することが大切です。", "xiang": "進んでも成果を得にくい状態です。"},
            "5": {"text": "先代の問題を解決することで、称賛を得られます。徳をもって応じることで、良い結果につながります。", "xiang": "徳で応じることが大切です。"},
            "6": {"text": "王にも諸侯にも仕えず、自分の道を高く掲げる時期です。これも一つの生き方として尊重されます。", "xiang": "志が他の模範となります。"}
        }
    },
    "19": {
        "judgment": "前進と成長の時期です。近づいて見守ることで、良い結果が期待できます。ただし、変化の時期が来ることも意識しておくことが大切です。",
        "tuan": "強いものが徐々に大きくなる時期です。喜びと従順さがあり、中心にあって応じ合っています。正しさを持って大きく発展できます。",
        "xiang": "沢の上に地がある形です。無限の教えを持ち、人々を限りなく支えることが大切です。",
        "lines": {
            "1": {"text": "共に前進することで、吉が生まれます。正しい道を歩む意志があることで、良い結果につながります。", "xiang": "正しい道を歩もうとする志があることが大切です。"},
            "2": {"text": "共に前進することで、良いことが起こります。まだ従わない者もいますが、利益がある時期です。", "xiang": "まだ天の命に従わない者がいますが、時が来れば従います。"},
            "3": {"text": "喜んで進もうとしますが、それだけでは有利ではありません。心配することで、問題を避けられます。", "xiang": "位置が適切でないことを認識することが大切です。"},
            "4": {"text": "最高の形で進むことで、問題はありません。適切な位置にいることが、良い結果を生みます。", "xiang": "位置が適切であることで、問題を避けられます。"},
            "5": {"text": "知恵を持って進むことが、偉大なリーダーにふさわしい態度です。中道を実践することが吉につながります。", "xiang": "中道を歩むことが大切です。"},
            "6": {"text": "誠実さと寛容さを持って進むことで、吉が生まれ、問題も避けられます。内なるものに志が向いています。", "xiang": "内に志があることで、吉が生まれます。"}
        }
    },
    "20": {
        "judgment": "観察と内省の時期です。手を洗い清めたように、誠実さを持って物事を見つめることが大切です。威厳ある姿勢を保つことで、周囲の尊敬を集められます。",
        "tuan": "大きな存在が上にあり、従順さと柔軟さを持って見つめています。天の道を観察することで、四季が狂わないように、聖人の道を観察することで、天下が従います。",
        "xiang": "風が地上を行く形です。各地を巡り、民の様子を観察して教えを施す時期です。",
        "lines": {
            "1": {"text": "子どものような見方をしていると、重要なことを見落とします。より深く物事を観察することが必要です。", "xiang": "子どものような観察は、小人の道です。"},
            "2": {"text": "隙間から覗き見るような観察では、限界があります。より広い視野を持つことが大切です。", "xiang": "隙間から覗くだけでは、恥ずかしいことです。"},
            "3": {"text": "自分の人生を振り返り、進むべきか退くべきかを判断する時期です。道を誤ることはありません。", "xiang": "自分の人生を観察することで、道を見失いません。"},
            "4": {"text": "国の輝きを観察する時期です。上の人に仕えることが有利です。", "xiang": "国の輝きを観察することで、仕える気持ちが生まれます。"},
            "5": {"text": "自分の人生を観察することで、過ちを避けられます。民の状態を見ることが大切です。", "xiang": "自分の人生を観察し、民を見ることが重要です。"},
            "6": {"text": "自分の性格や行いを振り返ることで、過ちを避けられます。まだ心が完全に安らいではいません。", "xiang": "志がまだ完全には落ち着いていません。"}
        }
    }
}

# Load files
with open('/Users/hideakimacbookair/Library/Mobile Documents/com~apple~CloudDocs/易経変化ロジックDB/data/reference/iching_texts_ctext_legge.json', 'r', encoding='utf-8') as f:
    original = json.load(f)
with open('/Users/hideakimacbookair/Library/Mobile Documents/com~apple~CloudDocs/易経変化ロジックDB/data/reference/iching_texts_ctext_legge_ja.json', 'r', encoding='utf-8') as f:
    ja_data = json.load(f)

for hex_num, trans in TRANSLATIONS.items():
    if hex_num not in ja_data["hexagrams"]:
        hex_data = copy.deepcopy(original["hexagrams"][hex_num])
        hex_data["judgment"]["modern_ja"] = trans["judgment"]
        hex_data["tuan"]["modern_ja"] = trans["tuan"]
        hex_data["xiang"]["modern_ja"] = trans["xiang"]
        for line_num, line_trans in trans["lines"].items():
            if line_num in hex_data["lines"]:
                hex_data["lines"][line_num]["modern_ja"] = line_trans["text"]
                if "xiang" in hex_data["lines"][line_num]:
                    hex_data["lines"][line_num]["xiang"]["modern_ja"] = line_trans["xiang"]
        ja_data["hexagrams"][hex_num] = hex_data
        print(f"Added hexagram {hex_num}")

with open('/Users/hideakimacbookair/Library/Mobile Documents/com~apple~CloudDocs/易経変化ロジックDB/data/reference/iching_texts_ctext_legge_ja.json', 'w', encoding='utf-8') as f:
    json.dump(ja_data, f, ensure_ascii=False, indent=2)
print(f"Total hexagrams: {len(ja_data['hexagrams'])}")
