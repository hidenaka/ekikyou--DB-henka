#!/usr/bin/env python3
"""卦61-64の日本語訳を追加"""
import json, copy

TRANSLATIONS = {
    "61": {
        "judgment": "心からの誠意がある時期です。豚や魚にまで通じ、大川を渡ることも有利です。堅実であれば有利です。",
        "tuan": "中孚は柔が内にあり剛が中を得ることで、喜んで従順に、孚が国を感化させます。豚や魚にまで吉なのは、信が及ぶからです。大川を渡るのに有利なのは、木の舟が虚しくないからです。中孚が堅実で有利なのは、天に応じるからです。",
        "xiang": "沢上に風がある形です。訴訟を論じて死刑を緩めることが大切です。",
        "lines": {
            "1": {"text": "心を定めれば吉で、他があれば安らぎません。志がまだ変わっていないからです。", "xiang": "心を定めて吉なのは、志がまだ変わっていないからです。"},
            "2": {"text": "鶴が陰で鳴き、その子が和します。良い酒があり、私は汝と共に飲みます。中心の願いです。", "xiang": "その子が和すのは、中心の願いです。"},
            "3": {"text": "敵を得て、太鼓を打ったり止めたり、泣いたり歌ったりします。正しい位置を得ていないからです。", "xiang": "太鼓を打ったり止めたりするのは、正しい位置を得ていないからです。"},
            "4": {"text": "月が満ちそうな時に、馬の仲間が亡くなりますが問題ありません。上に従っているからです。", "xiang": "馬の仲間が亡くなるのは、絶って上に従うからです。"},
            "5": {"text": "孚が連なり、問題ありません。正しい位置にあるからです。", "xiang": "孚が連なって問題ないのは、正しい位置にあるからです。"},
            "6": {"text": "鶏の声が天に聞こえても、堅実なら凶です。長続きしないからです。", "xiang": "鶏の声が天に聞こえるのは、どうして長続きしましょうか。"}
        }
    },
    "62": {
        "judgment": "小さく過ぎる時期です。通じており、堅実であれば有利です。小さなことには良いですが、大きなことには良くありません。飛ぶ鳥が声を残すように、上がるよりは下がる方が宜しく、大いなる吉です。",
        "tuan": "小過は、小さいものが過ぎて通じることです。過ぎて堅実であれば、時と共に行います。柔が中を得ているので、小事に吉です。剛が位置を失って中にないので、大事に良くありません。飛ぶ鳥の象があり、上がるより下がる方が宜しく、大いなる吉です。上に逆らい下に従います。",
        "xiang": "山上に雷がある形です。行いは恭しく過ぎ、喪には悲しみ過ぎ、用いることは倹約を過ぎることが大切です。",
        "lines": {
            "1": {"text": "飛ぶ鳥で凶を招きます。どうにもならないからです。", "xiang": "飛ぶ鳥で凶なのは、どうにもならないからです。"},
            "2": {"text": "祖父を過ぎて祖母に遇い、君に及ばず臣に遇います。問題ありません。位を犯さず、臣として遇うからです。", "xiang": "君に及ばないのは、臣が位を越えられないからです。"},
            "3": {"text": "過ぎて防がないと、従う者がこれを殺すかもしれません。凶で、位置が正しくないからです。", "xiang": "従う者がこれを殺すかもしれない凶は、どうにもなりません。"},
            "4": {"text": "問題はありません。過ぎずに遇い、進めば危険で戒めなければなりません。用いるのは永く堅実であってはなりません。剛が位置を得ていないからです。", "xiang": "過ぎずに遇うのは、位置が正しくないからです。進めば戒めなければならないのは、長くは続けられないからです。"},
            "5": {"text": "密雲が西郊から来ても雨が降らず、公が矢を射て穴にいる者を取ります。", "xiang": "密雲が雨を降らさないのは、すでに上にあるからです。"},
            "6": {"text": "過ぎずに過ぎ、飛ぶ鳥が離れて網にかかります。凶で、これを災と言います。すでに遠いからです。", "xiang": "過ぎずに過ぎるのは、すでに遠いからです。"}
        }
    },
    "63": {
        "judgment": "すでに成った時期です。小さく通じ、堅実であれば有利です。初めは吉ですが、終わりは乱れます。完成した後の維持が課題です。",
        "tuan": "すでに成ったとは通じることで、小さいものが通じます。堅実であれば有利で、剛と柔が正しく位置を得ています。初め吉なのは、柔が中を得ているからです。終わりは止まって乱れ、その道が窮するからです。",
        "xiang": "水が火の上にある形です。思慮を巡らせて患難を防ぐことが大切です。",
        "lines": {
            "1": {"text": "車輪を引いて尾を濡らしますが問題ありません。義として問題ないからです。", "xiang": "車輪を引くのは、義として問題ありません。"},
            "2": {"text": "婦人が車の飾りを失いますが、追わなくても七日で得られます。中道を持って行うからです。", "xiang": "七日で得るのは、中道を行くからです。"},
            "3": {"text": "高宗が鬼方を討ち、三年で克ちます。小人は用いるべきではありません。", "xiang": "三年で克つのは大変なことです。"},
            "4": {"text": "良い衣服に油染みができ、一日中戒めます。疑いがあるからです。", "xiang": "一日中戒めるのは、疑いがあるからです。"},
            "5": {"text": "東隣が牛を殺すより、西隣の簡素な祭りの方が、実に福を受けます。大いなる来たるからです。", "xiang": "東隣が牛を殺すのは、西隣の時に及びません。実に福を受けるのは、吉が大いに来るからです。"},
            "6": {"text": "頭を濡らすと危険です。どうして長続きしましょうか。", "xiang": "頭を濡らす危険は、どうして長続きしましょうか。"}
        }
    },
    "64": {
        "judgment": "まだ成っていない時期です。通じますが、小狐がほとんど渡りおえて尾を濡らし、利することがありません。完成に向けて最後まで気を抜かないことが大切です。",
        "tuan": "まだ成っていなくて通じるのは、柔が中を得ているからです。小狐がほとんど渡りおえるのは、まだ中から出ていないからです。尾を濡らして利がないのは、続けて終わらないからです。位置が正しくないのに剛と柔が応じているのは、功がないからです。",
        "xiang": "火が水の上にある形です。物を区別して位置を正すことが大切です。",
        "lines": {
            "1": {"text": "尾を濡らすと恥をかきます。極みを知らないからです。", "xiang": "尾を濡らすのは、極みを知らないからです。"},
            "2": {"text": "車輪を引いて堅実なら吉です。中正だからです。", "xiang": "中正だから吉です。"},
            "3": {"text": "まだ成っていないのに進めば凶です。大川を渡るのに有利です。まだ位置を得ていませんが有利です。", "xiang": "まだ成っていないのに進めば凶なのは、位置が正しくないからです。"},
            "4": {"text": "堅実で吉、後悔が消えます。震えて鬼方を討ち、三年で大国から賞を受けます。志が行われます。", "xiang": "堅実で吉、後悔が消えるのは、志が行われるからです。"},
            "5": {"text": "堅実で吉、後悔なく、賢い人の輝きがあります。誠意があれば吉で、中正だからです。", "xiang": "賢い人の輝きは、その輝きが吉だからです。"},
            "6": {"text": "酒を飲むことに誠意があれば問題ありませんが、頭を濡らすと誠意を失います。度を知ることが大切です。", "xiang": "酒を飲んで頭を濡らすのは、度を知らないからです。"}
        }
    }
}

with open('/Users/hideakimacbookair/Library/Mobile Documents/com~apple~CloudDocs/易経変化ロジックDB/data/reference/iching_texts_ctext_legge.json', 'r', encoding='utf-8') as f:
    original = json.load(f)
with open('/Users/hideakimacbookair/Library/Mobile Documents/com~apple~CloudDocs/易経変化ロジックDB/data/reference/iching_texts_ctext_legge_ja.json', 'r', encoding='utf-8') as f:
    ja_data = json.load(f)

for hex_num, trans in TRANSLATIONS.items():
    if hex_num not in ja_data["hexagrams"]:
        hex_data = copy.deepcopy(original["hexagrams"][hex_num])
        hex_data["judgment"]["modern_ja"] = trans["judgment"]
        hex_data["tuan"]["modern_ja"] = trans["tuan"]
        hex_data["xiang"]["modern_ja"] = trans["xiang"]
        for line_num, line_trans in trans["lines"].items():
            if line_num in hex_data["lines"]:
                hex_data["lines"][line_num]["modern_ja"] = line_trans["text"]
                if "xiang" in hex_data["lines"][line_num]:
                    hex_data["lines"][line_num]["xiang"]["modern_ja"] = line_trans["xiang"]
        ja_data["hexagrams"][hex_num] = hex_data
        print(f"Added hexagram {hex_num}")

with open('/Users/hideakimacbookair/Library/Mobile Documents/com~apple~CloudDocs/易経変化ロジックDB/data/reference/iching_texts_ctext_legge_ja.json', 'w', encoding='utf-8') as f:
    json.dump(ja_data, f, ensure_ascii=False, indent=2)
print(f"Total hexagrams: {len(ja_data['hexagrams'])}")
print("All 64 hexagrams completed!")
