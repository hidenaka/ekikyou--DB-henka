#!/usr/bin/env python3
"""卦41-50の日本語訳を追加"""
import json, copy

TRANSLATIONS = {
    "41": {
        "judgment": "減らすことで利がある時期です。誠意があれば大いなる吉で、問題はありません。堅実であれば、どの方向に動いても有利です。簡素な祭祀でも心がこもっていれば良いのです。",
        "tuan": "下を減らして上を増やすのは、道が上に向かうことです。減らしても誠意があれば大いなる吉です。簡素であっても誠意が大切です。減と増、満と空は時と共に行われます。",
        "xiang": "山の下に沢がある形です。怒りを抑え、欲望を制することが大切です。",
        "lines": {
            "1": {"text": "自分の仕事を終えて早く行けば問題ありません。減らすべきことを考えることが大切です。", "xiang": "終えて早く行くのは、志を合わせるためです。"},
            "2": {"text": "堅実であれば吉、進めば凶です。減らさずに増やすことができます。", "xiang": "堅実で吉なのは、中で志すからです。"},
            "3": {"text": "三人で行けば一人を減らし、一人で行けば友を得ます。調整が必要な時期です。", "xiang": "一人で行けば、三人は疑います。"},
            "4": {"text": "病を減らせば、早く喜びができて問題ありません。", "xiang": "病を減らすことは、喜ぶべきことです。"},
            "5": {"text": "亀の甲羅で占っても止められないほどの増益があります。大いなる吉です。", "xiang": "大いなる吉は上からの祝福です。"},
            "6": {"text": "減らさずに増やすと問題なく、堅実で吉です。どこに行っても有利で、臣下を得ますが家族はいません。", "xiang": "減らさずに増やすのは、大きく志を得るからです。"}
        }
    },
    "42": {
        "judgment": "増やすことが有利な時期です。大川を渡ることも有利です。どの方向に動いても利があります。",
        "tuan": "上を減らして下を増やすことで、民の喜びは限りありません。上から下に取り組むことで、道が大いに輝きます。どこに行っても有利なのは、中正で祝福があるからです。大川を渡るのは、木の道が進むからです。増は動いて従順であり、日々進んで限りがありません。",
        "xiang": "風と雷が共にある形です。善を見れば移り、過ちがあれば改めることが大切です。",
        "lines": {
            "1": {"text": "大きな作為をするのに有利な時期です。大いなる吉で問題ありません。下が厚くないのは自分のためではありません。", "xiang": "大いなる吉で問題ないのは、下が自分のためでないからです。"},
            "2": {"text": "亀の甲羅で占っても止められないほどの増益があります。永く堅実であれば吉です。王が帝に祭祀を行うと吉です。", "xiang": "増があるのは、外から来るからです。"},
            "3": {"text": "凶事によって増やすと問題なく、中道で進み、公に告げて信頼を得ます。", "xiang": "凶事によって増やすのは、すでにあることに加えるからです。"},
            "4": {"text": "中道で公に告げて従えば、国を移すことを頼むのに有利です。", "xiang": "公に告げて従うのは、益志を持つためです。"},
            "5": {"text": "恩恵を与える心があり、問わずとも大いなる吉です。人々が我が徳を恵んでくれます。", "xiang": "人々が我が徳を恵むと、大きく志を得ます。"},
            "6": {"text": "増やさずに打つと、恒心がなく凶です。", "xiang": "増やさずに打つのは偏った言葉です。打たれるのは外から来るからです。"}
        }
    },
    "43": {
        "judgment": "決断して除く時期です。王庭に示し、誠意を持って危険を告げます。自分の領地から告げ、武力に頼ることは有利ではありません。どこかに行くことが有利です。",
        "tuan": "決とは決断することで、強いものが弱いものを決断します。健やかに喜び、決断して和らぎます。王庭に示すのは、弱いものが強いものの上に乗っているからです。誠意を持って危険を告げ、輝きを持って告げます。自分の領地から告げるのは、光に尊ぶべきからです。武力に頼ることは有利でないのは、すでに盛んになっているからです。",
        "xiang": "天上に沢がある形です。恩恵を下に施し、徳に居って咎められないようにすることが大切です。",
        "lines": {
            "1": {"text": "つま先に力を入れて前進しても、勝てないなら問題があります。", "xiang": "勝てないなら進むのは過ちです。"},
            "2": {"text": "警戒の叫びを上げれば、夜に武器を持っても恐れることはありません。", "xiang": "武器を持っても恐れないのは、中道を得ているからです。"},
            "3": {"text": "頬骨に力があると凶です。決断力のある人が一人で雨に濡れて不快になっても、問題はありません。", "xiang": "決断力のある人が進めば、最終的に問題はありません。"},
            "4": {"text": "尻に皮がなく、歩みが難しい時期です。羊を率いれば後悔が消えます。言葉を聞いても信じません。", "xiang": "歩みが難しいのは、位置が正しくないからです。言葉を聞いても信じないのは、聡明さが足りないからです。"},
            "5": {"text": "雑草を決断するように、中道で進めば問題ありません。", "xiang": "中道で進めば、中にあってまだ輝いていないです。"},
            "6": {"text": "叫びがなければ、最終的に凶があります。", "xiang": "叫びがない凶は、最終的に続けられません。"}
        }
    },
    "44": {
        "judgment": "偶然の出会いがある時期です。女性が強すぎて、嫁がせるのに適していません。", 
        "tuan": "遇とは出会うことで、弱いものが強いものに出会います。嫁がせるのに適していないのは、長く続けられないからです。天地が出会えば万物が現れ、強いものが中正に出会えば天下が大いに行われます。遇う時の意義は大きいです。",
        "xiang": "天の下に風がある形です。命を発して四方に告げることが大切です。",
        "lines": {
            "1": {"text": "金の止め具で止める時期です。堅実で吉。どこかに行けば凶を見ます。やせた豚がよじ登っているようです。", "xiang": "金の止め具で止めるのは、柔らかいものを止める道です。"},
            "2": {"text": "袋の中に魚がいて問題なく、客には適しません。", "xiang": "袋の中に魚がいるのは、客に及ばせない義です。"},
            "3": {"text": "尻に皮がなく、歩みが難しい時期です。大きな問題は避けられます。", "xiang": "歩みが難しいのは、行く道がまだ引かれていないからです。"},
            "4": {"text": "袋に魚がなく、凶が起こります。", "xiang": "魚がなく凶なのは、民を遠ざけているからです。"},
            "5": {"text": "瓜を杞で包むように、美しさを含んでいます。天から降るものがあります。", "xiang": "中正で含んでいるのは、志が自分を捨てていないからです。天から降るものがあるのは、命に逆らわないからです。"},
            "6": {"text": "角を使って遇うと恥をかきますが、問題はありません。", "xiang": "角を使って遇うのは、上にあって窮するからです。"}
        }
    },
    "45": {
        "judgment": "集まる時期です。通じて、王が祖廟に至ります。偉大な人に会うことが有利で、堅実なら吉です。大きな犠牲が吉で、どこに行っても有利です。",
        "tuan": "集まるとは集まることです。順に喜んで、強いものが中にあって応じます。王が祖廟に至るのは、祖先を祀ってまとまるからです。偉大な人に会って堅実なら吉で集まり、正道によって集まります。大きな犠牲が吉なのは、天命に順うからです。集まることを観れば、万物の情が見えます。",
        "xiang": "沢の上に地がある形です。武器を準備して不慮の事態に備えることが大切です。",
        "lines": {
            "1": {"text": "誠意があっても終わらなければ、乱れて集まります。呼べば一握りで笑いになり、恐れることはありません。進めば問題ありません。", "xiang": "乱れて集まるのは、志が乱れているからです。"},
            "2": {"text": "引かれて吉で問題ありません。誠意があれば、簡素な祭祀でも有利です。", "xiang": "引かれて吉で問題ないのは、中にあって変わらないからです。"},
            "3": {"text": "集まっても嘆く時期です。利がなく、進めば問題なく、小さな恥をかきます。", "xiang": "進めば問題ないのは、上が従順だからです。"},
            "4": {"text": "大いなる吉で問題ありません。位置が正しくないからです。", "xiang": "大吉で問題ないのは、位置が正しくないからです。"},
            "5": {"text": "位置があって集まり、問題はありません。信じなくても、元から永く堅実であれば、後悔が消えます。", "xiang": "位置があって集まり、志がまだ輝いていません。"},
            "6": {"text": "悲嘆し涙を流しますが、問題はありません。", "xiang": "上にあってまだ安らいでいません。"}
        }
    },
    "46": {
        "judgment": "上に昇る時期です。大いに通じ、偉大な人に会うことが有利です。恐れることなく、南に征けば吉です。",
        "tuan": "柔らかいものが時と共に上に昇ります。従順にして途中から、強いものを得て応じます。大いに通じ、偉大な人に会うことが有利で、祝福があります。南に征けば吉で、志が行われます。",
        "xiang": "地中に木がある形です。徳を積み重ね、小さいものを積んで高く大きくすることが大切です。",
        "lines": {
            "1": {"text": "誠実に昇ると大吉です。上と志が合っています。", "xiang": "誠実に昇ると大吉なのは、上と志が合うからです。"},
            "2": {"text": "誠意があれば、簡素な祭祀でも問題ありません。", "xiang": "中にあって誠意があるからです。"},
            "3": {"text": "空っぽの都市に昇るように、障害がない時期です。", "xiang": "空っぽの都市に昇るのは、疑うことがないからです。"},
            "4": {"text": "王が岐山に祭祀を行うと吉で問題ありません。順にして事を行っています。", "xiang": "王が岐山に祭祀を行うのは順事です。"},
            "5": {"text": "堅実で吉、階段を昇ります。", "xiang": "堅実で吉、階段を昇るのは大きく志を得るからです。"},
            "6": {"text": "暗闘の中で昇り、止まらずに堅実であることが有利です。", "xiang": "暗闘の中で上に昇るのは、消えていくからです。"}
        }
    },
    "47": {
        "judgment": "困窮の時期です。通じ、偉大な人は堅実で吉です。言葉で訴えても信じられません。",
        "tuan": "困窮とは、強いものが覆われることです。険しくても喜びがあり、困窮しても通じるのは、偉大な人が中正だからです。偉大な人は堅実で吉なのは、強さが中にあるからです。言葉で訴えても信じられないのは、口先だけでは信用されないからです。",
        "xiang": "沢に水がない形です。命を捧げて志を達成することを考えることが大切です。",
        "lines": {
            "1": {"text": "尻を木の株で困らせ、暗い谷に入って三年出られません。", "xiang": "暗い谷に入るのは、暗くて明るくないからです。"},
            "2": {"text": "酒食に困っていると、朱い帯をつけた者が来ます。祭祀を行うのに有利で、進めば凶ですが問題はありません。", "xiang": "酒食に困っているのは、中にあって祝福があるからです。"},
            "3": {"text": "石に困り、棘に寄りかかります。家に入っても妻が見えません。凶です。", "xiang": "棘に寄りかかるのは、強いものに乗っているからです。家に入っても妻が見えないのは、不吉だからです。"},
            "4": {"text": "ゆっくり来て、金の車に困ります。恥をかきますが終わりがあります。", "xiang": "ゆっくり来るのは、志が下にあるからです。位置が正しくなくても終わりがあります。"},
            "5": {"text": "鼻や足を切られても、朱い帯をつけた者に困らされます。ゆっくりと喜びがあり、祭祀を行うことが有利です。", "xiang": "鼻や足を切られるのは、志がまだ得られないからです。ゆっくりと喜びがあるのは、中正だからです。祭祀が有利なのは、祝福を受けるからです。"},
            "6": {"text": "つる草に困り、動けば危うい状態です。後悔があると言えば後悔がないので、進めば吉です。", "xiang": "つる草に困るのは、まだ正しくないからです。動けば後悔がありますが、進めば吉です。"}
        }
    },
    "48": {
        "judgment": "井戸のような時期です。町を変えても井戸は変わりません。失うことも増えることもなく、来る者も去る者も井戸から汲みます。ほとんど水を汲み上げたところで綱を失うと凶です。",
        "tuan": "木を水の上に下ろして汲み上げるのが井戸です。井戸は養って窮まりません。町を変えても井戸は変わらないのは、強さが中にあるからです。ほとんど汲んだところで綱を失う凶は、功が成っていないからです。",
        "xiang": "木の上に水がある形です。民を労い、互いに助け合うことを勧めることが大切です。",
        "lines": {
            "1": {"text": "井戸の泥は食べられません。古い井戸には鳥も来ません。", "xiang": "井戸の泥は食べられないのは、下だからです。古い井戸に鳥が来ないのは、時に捨てられているからです。"},
            "2": {"text": "井戸の谷で魚を射ます。甕は壊れて漏れています。", "xiang": "井戸の谷で魚を射るのは、応える者がないからです。"},
            "3": {"text": "井戸は澄んでも飲まれません。心が痛みます。汲むことができれば、王が明であれば共に福を受けられます。", "xiang": "井戸が澄んでも飲まれないのは、上に明王がないからです。"},
            "4": {"text": "井戸を石で覆って問題ありません。修繕の時期です。", "xiang": "井戸を石で覆って問題ないのは、井戸を修繕するからです。"},
            "5": {"text": "井戸は冽として、冷たい泉を飲みます。", "xiang": "冷たい泉を飲むのは、中正だからです。"},
            "6": {"text": "井戸から汲んで覆わず、誠意があって大いなる吉です。", "xiang": "大いなる吉が上にあるのは、大いに功を成すからです。"}
        }
    },
    "49": {
        "judgment": "変革の時期です。実行してから信じられます。大いに通じ、堅実であれば有利で、後悔が消えます。",
        "tuan": "水と火が互いに滅ぼし合い、二人の女が一緒にいても志が合いません。実行してから信じられるのは、変革して信じられるからです。文明に喜んで、正しくして大いに通じます。変革が正しければ後悔が消えます。天地が変革して四季が成り、湯王や武王が天命に応じて人に応じました。変革の時の意義は大きいです。",
        "xiang": "沢の中に火がある形です。暦を定めて時を明らかにすることが大切です。",
        "lines": {
            "1": {"text": "黄牛の皮で縛られています。動くことができません。", "xiang": "黄牛で縛られているのは、以て何かをすべきではないからです。"},
            "2": {"text": "実行して変革すれば吉で問題ありません。", "xiang": "実行して変革するのは、進んで称賛があるからです。"},
            "3": {"text": "進めば凶で堅実であっても危険です。変革の言葉が三度周れば信じられます。", "xiang": "変革の言葉が三度周るのは、また何を待つのでしょうか。"},
            "4": {"text": "後悔が消え、信じられて命を変えると吉です。", "xiang": "命を変えて吉なのは、志を信じるからです。"},
            "5": {"text": "偉大な人が虎のように変わり、占わなくても信じられます。", "xiang": "偉大な人が虎のように変わるのは、その文様が煥然としているからです。"},
            "6": {"text": "賢い人が豹のように変わり、小人は顔つきを変えます。進めば凶、堅実に留まれば吉です。", "xiang": "賢い人が豹のように変わるのは、その文様が煥然としているからです。小人が顔を変えるのは、君に従うからです。"}
        }
    },
    "50": {
        "judgment": "鼎のような時期です。大いなる吉で、通じます。賢者と共に事を成すことが大切です。",
        "tuan": "鼎は象です。木を火に入れて煮ることで、聖人が煮て上帝に祭り、大いに煮て聖人と賢者を養います。従順に耳と目を持ち、柔らかいものが進み上って強いものに応じます。中を得て強いものに応じ、大いに通じます。",
        "xiang": "木の上に火がある形です。正しい位置を保って命を固めることが大切です。",
        "lines": {
            "1": {"text": "鼎の足を逆さにして、汚れを出すのに利があります。妾を得て子のためにしますが問題ありません。", "xiang": "鼎を逆さにするのは、まだ悪くないからです。汚れを出すのに利があるのは、貴いものに従うからです。"},
            "2": {"text": "鼎に実があり、敵が嫉妬しても私に及ぶことはありません。吉です。", "xiang": "鼎に実があるのは、慎んで進むべきです。敵が嫉妬しても、最終的に問題ありません。"},
            "3": {"text": "鼎の耳が変わり、行動が塞がれ、キジの汁を食べられません。雨が降って後悔が減り、最終的に吉です。", "xiang": "鼎の耳が変わるのは、義を失っているからです。"},
            "4": {"text": "鼎の足が折れ、公の食事をこぼして刑罰を受けます。凶です。", "xiang": "公の食事をこぼすのは、信頼がどうなるかです。"},
            "5": {"text": "鼎に黄金の耳と玉の飾り、堅実であれば有利です。", "xiang": "鼎に黄金の耳があるのは、中にあって実があるからです。"},
            "6": {"text": "鼎に玉の飾りがあり、大いなる吉で何も不利なことはありません。", "xiang": "玉の飾りが上にあるのは、強さと柔らかさが調和しているからです。"}
        }
    }
}

with open('/Users/hideakimacbookair/Library/Mobile Documents/com~apple~CloudDocs/易経変化ロジックDB/data/reference/iching_texts_ctext_legge.json', 'r', encoding='utf-8') as f:
    original = json.load(f)
with open('/Users/hideakimacbookair/Library/Mobile Documents/com~apple~CloudDocs/易経変化ロジックDB/data/reference/iching_texts_ctext_legge_ja.json', 'r', encoding='utf-8') as f:
    ja_data = json.load(f)

for hex_num, trans in TRANSLATIONS.items():
    if hex_num not in ja_data["hexagrams"]:
        hex_data = copy.deepcopy(original["hexagrams"][hex_num])
        hex_data["judgment"]["modern_ja"] = trans["judgment"]
        hex_data["tuan"]["modern_ja"] = trans["tuan"]
        hex_data["xiang"]["modern_ja"] = trans["xiang"]
        for line_num, line_trans in trans["lines"].items():
            if line_num in hex_data["lines"]:
                hex_data["lines"][line_num]["modern_ja"] = line_trans["text"]
                if "xiang" in hex_data["lines"][line_num]:
                    hex_data["lines"][line_num]["xiang"]["modern_ja"] = line_trans["xiang"]
        ja_data["hexagrams"][hex_num] = hex_data
        print(f"Added hexagram {hex_num}")

with open('/Users/hideakimacbookair/Library/Mobile Documents/com~apple~CloudDocs/易経変化ロジックDB/data/reference/iching_texts_ctext_legge_ja.json', 'w', encoding='utf-8') as f:
    json.dump(ja_data, f, ensure_ascii=False, indent=2)
print(f"Total hexagrams: {len(ja_data['hexagrams'])}")
