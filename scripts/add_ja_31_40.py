#!/usr/bin/env python3
"""卦31-40の日本語訳を追加"""
import json, copy

TRANSLATIONS = {
    "31": {
        "judgment": "互いに感じ合う時期です。堅実であれば吉で、良い関係を結ぶことが有利です。心を通わせることで道が開けます。",
        "tuan": "感じ合うということは、柔らかいものが上にあり、強いものが下にあることです。二つの気が感応し合い、男が女の下へ行くことで、万物が生まれ育ちます。聖人が民の心を動かすことで、天下が和平になります。",
        "xiang": "山の上に沢がある形です。虚心で他者を受け入れることが大切です。",
        "lines": {
            "1": {"text": "足の親指に感じる程度です。まだ動きの兆しにすぎません。", "xiang": "志が外に向かっています。"},
            "2": {"text": "ふくらはぎに感じる状態で凶です。しかし、じっとしていれば吉です。", "xiang": "じっとしていれば害はありません。"},
            "3": {"text": "ももに感じ、従おうとする状態です。進むと問題が生じやすいです。", "xiang": "志が他者に向いて、位置が正しくありません。"},
            "4": {"text": "堅実であれば吉で、後悔もありません。行き来を繰り返せば、友が思いに従ってきます。", "xiang": "まだ感じることが大きくなく、行き来を繰り返している状態です。"},
            "5": {"text": "背中の肉に感じる状態です。後悔はありません。志が終わりに向かっています。", "xiang": "志が終わりを向いています。"},
            "6": {"text": "口や舌に感じる状態です。言葉で動かそうとしています。", "xiang": "口で人を動かそうとしています。"}
        }
    },
    "32": {
        "judgment": "長く続けることが大切な時期です。堅実であれば問題なく、どの方向に動いても有利です。",
        "tuan": "恒久であることは、強いものが上にあり、柔らかいものが下にあることです。雷と風が共にあり、従順さと動きが合わさっています。日月が天に恒久であって明るく、四季が変化して恒久に成り立ち、聖人の道が恒久であって天下が化成されます。",
        "xiang": "雷と風が共にある形です。立場をしっかり保ち、方向を変えないことが大切です。",
        "lines": {
            "1": {"text": "深く恒久を求めすぎると凶です。利することはありません。", "xiang": "深く恒久を求めることの凶は、始めから深く求めすぎることです。"},
            "2": {"text": "後悔が消える時期です。中にあって恒久であることで、後悔を避けられます。", "xiang": "中にあって恒久であることが大切です。"},
            "3": {"text": "徳を恒久に保たなければ、恥をかくかもしれません。堅実でも問題があります。", "xiang": "徳を恒久に保たないと、受け入れてもらえません。"},
            "4": {"text": "場所にいても獲物がいない状態です。位置が正しくありません。", "xiang": "位置が正しくなく、どうして獲物が得られるでしょうか。"},
            "5": {"text": "徳を恒久に保つことが堅実で、女性にとっては吉、男性にとっては凶です。従う者と従われる者の違いです。", "xiang": "女性は一人に従うことが正しく、男性は仕事を主とすべきです。"},
            "6": {"text": "恒久に動き続けることは凶です。常に変化すると、功を得られません。", "xiang": "上にあって常に動くと、大いに功を失います。"}
        }
    },
    "33": {
        "judgment": "退くことが有利な時期です。小さなことには堅実さが有利です。時機を見て身を引くことで、問題を避けられます。",
        "tuan": "退いて吉なのは、強いものが正しい位置にあって応じているからです。時に従って動き、小さなことに堅実であることで利があります。退くことの意義は大きいです。",
        "xiang": "天の下に山がある形です。小人を遠ざけ、憎まず厳しく接することが大切です。",
        "lines": {
            "1": {"text": "退く時に尾にいると危険です。どこにも行かないことが良いかもしれません。", "xiang": "退く尾の危険は、災いを招かないためです。"},
            "2": {"text": "黄牛の皮で縛られたように、離れることができません。志を持って従うことで、離れられない状態です。", "xiang": "志が堅固で離れられません。"},
            "3": {"text": "縛られて退けない状態は危険で困難です。臣下を養うことで吉が得られます。", "xiang": "縛られて危険が生じますが、臣を養えば利があります。"},
            "4": {"text": "好んで退くのは、賢い人には吉ですが、小人には難しいです。", "xiang": "賢い人は好んで退いて吉を得ますが、小人は難しいです。"},
            "5": {"text": "美しく退くことで堅実さが吉をもたらします。正しいことを志すことで、称賛を得られます。", "xiang": "正しいことを志すことで吉が生まれます。"},
            "6": {"text": "太って退くと、問題がなく、何をしても有利です。疑いがありません。", "xiang": "外にいて疑いがないからです。"}
        }
    },
    "34": {
        "judgment": "力が強い時期です。堅実であることが有利です。力を正しく使うことで、大きな成果が期待できます。",
        "tuan": "大いに強いのは、強さが盛んだからです。強さと動きが合わさり、大いに強くなります。正しいことが有利なのは、正しさこそが偉大さだからです。天地の情を知ることができます。",
        "xiang": "雷が天上にある形です。礼に合わないことは行わないことが大切です。",
        "lines": {
            "1": {"text": "足に強さがあります。進めば凶です。誠意があります。", "xiang": "足に強さがあり、誠意が尽きています。"},
            "2": {"text": "堅実であれば吉です。中にあることで吉が生まれます。", "xiang": "中にあるから吉です。"},
            "3": {"text": "小人は強さを使い、賢い人は使いません。堅実でも危険です。羊が垣根に突っ込んで角を絡ませるようなものです。", "xiang": "小人は強さを使いますが、賢い人は使いません。"},
            "4": {"text": "堅実で吉、後悔が消えます。垣根が開いて角を絡ませず、大きな車の軸受けのように強さがあります。", "xiang": "垣根が開くのは、まだ問題がないからです。"},
            "5": {"text": "羊を易々と失うように、執着がありません。後悔はありません。", "xiang": "羊を失っても、位置が正しくないだけです。"},
            "6": {"text": "羊が垣根に突っ込んで、進むことも退くこともできません。利することはありませんが、困難が吉に変わることがあります。", "xiang": "進むことも退くこともできないのは、詳しく考えていないからです。困難が吉に変わるのは、過ちが長続きしないからです。"}
        }
    },
    "35": {
        "judgment": "進んで栄える時期です。柔順さが報われ、多くの恩恵を受けて、大きく活躍できます。",
        "tuan": "晋とは進むことです。明るいものが地の上に出て、順に大いなる明るさに付き従います。柔順なものが上っていくことで、進み栄えます。",
        "xiang": "明るい太陽が地上に出る形です。自らを明らかにして徳を照らすことが大切です。",
        "lines": {
            "1": {"text": "進もうとしても押し戻される状態ですが、堅実であれば吉です。信用されなくても、ゆったり構えれば問題ありません。", "xiang": "押し戻されてもゆったり構えることが、まだ命を受けていないからです。"},
            "2": {"text": "進んでも憂いがあります。堅実であれば吉で、王母から大きな福を受けられます。", "xiang": "大きな福を受けるのは、中正だからです。"},
            "3": {"text": "衆人の同意を得て、後悔が消えます。皆が進むことを認めています。", "xiang": "衆人の同意で、志が上に向かっています。"},
            "4": {"text": "ハムスターのように進んでも、堅実には危険があります。位置が正しくありません。", "xiang": "位置が正しくないからです。"},
            "5": {"text": "後悔が消えます。得失を気にしないでください。進めば吉で、何をしても有利です。", "xiang": "得失を気にしなければ、進んで慶びがあります。"},
            "6": {"text": "角を使って進むのは、敵を征伐する時だけにします。危険ですが吉となり、問題ありません。ただし、堅実であっても恥をかくことがあります。", "xiang": "敵を征伐することで正しさを得ますが、道がまだ光っていません。"}
        }
    },
    "36": {
        "judgment": "明るさが傷つけられる時期です。困難な中でも堅実さを守ることで、利があります。",
        "tuan": "明るいものが地中に入る形です。内に明るさを持ちながら外は従順に、大難を経験しても文王のように正しさを守ります。困難な中でも志を正すことが有利です。",
        "xiang": "明るいものが地中に入る形です。民に接する時は、明るさを隠して暗くすることで身を守れます。",
        "lines": {
            "1": {"text": "飛んでいるものが翼を垂れる状態です。賢い人は旅の途中で三日食べなくても、行くべき所には主人が言うことがあります。", "xiang": "賢い人の旅では、義として食べないこともあります。"},
            "2": {"text": "左ももを傷つけられますが、馬の力で救われ、吉です。", "xiang": "馬の力で幸運です。"},
            "3": {"text": "南を狩って大きな首領を得ますが、急いで正すことはできません。", "xiang": "南を狩る志は大きな獲物を得ることです。"},
            "4": {"text": "左の腹を突き、明るさが傷つく心を得て、門や庭を出ます。", "xiang": "門や庭を出て、志を得ます。"},
            "5": {"text": "箕子のように、堅実さが有利です。明るさを消すことはできません。", "xiang": "箕子の堅実さは、明るさを消すことができないからです。"},
            "6": {"text": "明るくないから暗いのです。最初は天に昇っても、後には地に入ります。", "xiang": "最初は天に昇りますが、四国を照らします。後には地に入り、規則を失います。"}
        }
    },
    "37": {
        "judgment": "家庭と関係を整える時期です。女性の堅実さが特に有利です。内から始めて外に広げることが大切です。",
        "tuan": "女性は内で正しい位置にあり、男性は外で正しい位置にあります。男女が正しいのは天地の大義です。家に厳しい主人がいるのは父母です。父は父らしく、子は子らしく、兄は兄らしく、弟は弟らしく、夫は夫らしく、妻は妻らしくあれば、家は正しくなります。家を正すことで天下が安定します。",
        "xiang": "風が火から出る形です。言葉に実があり、行いに恒久性があることが大切です。",
        "lines": {
            "1": {"text": "家に規則を設けることで、後悔を避けられます。志が変わらないうちに規則を作ることが大切です。", "xiang": "志が変わらないうちに規則を作ります。"},
            "2": {"text": "従うべきことがなく、中で食事を作る役割です。堅実で吉です。", "xiang": "柔順で中にあることで、吉です。"},
            "3": {"text": "家の人が厳しく叱ると、後悔しても危険ですが吉です。女性や子供が笑い合うと、最終的には恥をかきます。", "xiang": "家が厳しいと、失われていない状態です。女性や子供が笑い合うと、家は失われます。"},
            "4": {"text": "家を富ませることで大吉です。順に位置にあることで、大吉が生まれます。", "xiang": "家を富ませて大吉なのは、位置に順っているからです。"},
            "5": {"text": "王が家を持つように、心配せずとも吉です。愛を交わすことで、吉が生まれます。", "xiang": "愛を交わすことで吉が生まれます。"},
            "6": {"text": "誠意があり威厳があれば、最終的に吉です。自分を反省することで吉に向かいます。", "xiang": "威厳が吉をもたらすのは、自分を反省するからです。"}
        }
    },
    "38": {
        "judgment": "対立や違いがある時期です。小さなことには吉があります。違いを認め合いながら調和を目指すことが大切です。",
        "tuan": "火は上に動き、沢は下に動きます。二人の女が一緒にいても志が合いません。喜んで明るさに付くことで、柔らかいものが進み上って中を得ます。小事には吉です。天地が対しても事業は同じであり、男女が対しても志は通じ、万物が対しても事業は同類です。",
        "xiang": "上に火、下に沢がある形です。同じでありながら違いもあることを認識することが大切です。",
        "lines": {
            "1": {"text": "後悔が消えます。馬を失っても追わなければ戻ってきます。悪い人を見てもそれで過ちを避けられます。", "xiang": "悪い人を見ることで過ちを避けられます。"},
            "2": {"text": "路地で主人に出会います。問題ありません。", "xiang": "路地で主人に出会っても、失礼ではありません。"},
            "3": {"text": "車を引かれ、牛を止められ、人は刺青され鼻を削がれます。始まりはありませんが、終わりがあります。", "xiang": "車を引かれるのは、位置が正しくないからです。終わりがあるのは、強いものに出会うからです。"},
            "4": {"text": "対立して孤独ですが、元の男に出会って誠意を交わせば問題ありません。", "xiang": "誠意を交わして問題ないのは、志が運ばれるからです。"},
            "5": {"text": "後悔が消えます。宗族が膚を噛むように、進んでも何の問題もありません。", "xiang": "宗族が膚を噛むのは、進んで喜びがあるからです。"},
            "6": {"text": "対立して孤独で、豚が泥を背負い、車に鬼が満ちているように見えます。最初は弓を引きますが、後には弓を置きます。敵ではなく婚姻でした。進めば雨に会い、吉です。", "xiang": "雨の吉は、衆の疑いが消えるからです。"}
        }
    },
    "39": {
        "judgment": "困難に直面する時期です。西南は有利ですが、東北は有利ではありません。偉大な人に会うことが有利で、堅実であれば吉です。",
        "tuan": "険しいものが前にあります。険を見て止まることが知恵です。西南に利があるのは、進んで中を得るからです。東北に利がないのは、道が困窮するからです。偉大な人に会うことが有利で、進めば功があります。堅実であれば吉で、邦を正すことができます。困難の時の働きは大きいです。",
        "xiang": "山に水がある形です。自分に反省して徳を修めることが大切です。",
        "lines": {
            "1": {"text": "進めば困難、戻れば称賛されます。まず待つことが正しいです。", "xiang": "進めば困難、戻れば称賛は、待つ価値があるからです。"},
            "2": {"text": "王の臣として困難に困難を重ねますが、自分のためではありません。", "xiang": "王の臣として困難に困難を重ねるのは、自分を傷つけることが最終的にはないからです。"},
            "3": {"text": "進めば困難、戻って来ます。内から喜ばれます。", "xiang": "進めば困難、戻れば内から喜ばれます。"},
            "4": {"text": "進めば困難、戻れば仲間と連なります。位置が正しいからです。", "xiang": "進めば困難、戻れば連なるのは、位置が正しいからです。"},
            "5": {"text": "大いなる困難に友が来ます。中正であることで、大徳の報いがあります。", "xiang": "大いなる困難に友が来るのは、中正であることの報いです。"},
            "6": {"text": "進めば困難、戻れば大いなる成果があります。吉で、偉大な人に会うことが有利です。", "xiang": "進めば困難、戻れば大いなる成果があるのは、志が内にあるからです。偉大な人に会うことが有利なのは、高貴な者に従うからです。"}
        }
    },
    "40": {
        "judgment": "困難から解放される時期です。西南が有利です。行くべき所がなければ元の場所に戻れば吉です。行くべき所があれば早く行けば吉です。",
        "tuan": "険しいものから動き出して抜け出す形です。西南に利があるのは、進んで衆を得るからです。元に戻れば吉なのは、中を得るからです。行くべき所があれば早く行けば吉なのは、進めば功があるからです。天地が解ければ雷雨が起こり、草木の芽が育ちます。解の時の働きは大きいです。",
        "xiang": "雷と雨が起こる形です。過ちを許し、罪を赦すことが大切です。",
        "lines": {
            "1": {"text": "問題ありません。休息が正しいです。剛と柔が交わり、義に問題ありません。", "xiang": "剛と柔の交わりは、義に問題がありません。"},
            "2": {"text": "狩りで三匹の狐を得て黄金の矢を得ます。堅実で吉です。", "xiang": "中正だから吉です。"},
            "3": {"text": "荷物を背負って車に乗ると、盗賊を招きます。堅実でも恥をかきます。", "xiang": "荷物を背負って車に乗るのは、自分自身が招くことです。誰を咎められるでしょうか。"},
            "4": {"text": "親指を解くと、朋友が来て信頼されます。", "xiang": "親指を解くのは、まだ位置が適切でないからです。"},
            "5": {"text": "賢い人だけが解を持っています。吉で、小人に信頼をもたらします。退く者があります。", "xiang": "賢い人が解を持つのは、小人が退くからです。"},
            "6": {"text": "公が鷹を射って高い城壁の上で手に入れます。何も有利でないことはありません。", "xiang": "公が鷹を射るのは、邪悪を取り除くためです。"}
        }
    }
}

with open('/Users/hideakimacbookair/Library/Mobile Documents/com~apple~CloudDocs/易経変化ロジックDB/data/reference/iching_texts_ctext_legge.json', 'r', encoding='utf-8') as f:
    original = json.load(f)
with open('/Users/hideakimacbookair/Library/Mobile Documents/com~apple~CloudDocs/易経変化ロジックDB/data/reference/iching_texts_ctext_legge_ja.json', 'r', encoding='utf-8') as f:
    ja_data = json.load(f)

for hex_num, trans in TRANSLATIONS.items():
    if hex_num not in ja_data["hexagrams"]:
        hex_data = copy.deepcopy(original["hexagrams"][hex_num])
        hex_data["judgment"]["modern_ja"] = trans["judgment"]
        hex_data["tuan"]["modern_ja"] = trans["tuan"]
        hex_data["xiang"]["modern_ja"] = trans["xiang"]
        for line_num, line_trans in trans["lines"].items():
            if line_num in hex_data["lines"]:
                hex_data["lines"][line_num]["modern_ja"] = line_trans["text"]
                if "xiang" in hex_data["lines"][line_num]:
                    hex_data["lines"][line_num]["xiang"]["modern_ja"] = line_trans["xiang"]
        ja_data["hexagrams"][hex_num] = hex_data
        print(f"Added hexagram {hex_num}")

with open('/Users/hideakimacbookair/Library/Mobile Documents/com~apple~CloudDocs/易経変化ロジックDB/data/reference/iching_texts_ctext_legge_ja.json', 'w', encoding='utf-8') as f:
    json.dump(ja_data, f, ensure_ascii=False, indent=2)
print(f"Total hexagrams: {len(ja_data['hexagrams'])}")
