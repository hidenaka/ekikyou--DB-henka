#!/usr/bin/env python3
"""
HaQeiトーン日本語訳を全64卦に追加するスクリプト
禁止語: 易経、卦、爻、変爻、運勢、占い、宿命、当たる/外れる、必ず、〜ましょう
言い換え: 易経→3000年前の知恵、卦→パターン、爻→段階/フェーズ
トーン: 寄り添い×温かい言い切り、40-120文字
"""

import json
import copy

# HaQeiトーン日本語訳のテンプレート（各卦用）
TRANSLATIONS = {
    "6": {
        "judgment": "争いや対立が生じやすい時期です。慎重に対処し、大きな決断は控えることが賢明です。信頼できる仲介者を見つけることで、状況が改善に向かいます。",
        "tuan": "上に強さ、下に危険がある構図です。争いを避けるのが難しくても、途中で収めることで良い結果につながります。最後まで争うと、望まない結末を招きやすいです。",
        "xiang": "何事も始める前に、よく考えることが大切です。計画を練り直すことで、後のトラブルを避けられます。",
        "lines": {
            "1": {"text": "争いを長引かせないことが吉につながります。少し言われることがあっても、最終的には良い結果になります。", "xiang": "争いは長く続けるものではありません。明確な理由があれば、周囲も理解してくれます。"},
            "2": {"text": "争いに勝てない状況です。一歩引いて静かに過ごすことで、災いを避けられます。", "xiang": "格上の相手と争うと、かえって困難を招きます。"},
            "3": {"text": "今あるものを守り、堅実に過ごすことが吉です。成果を主張しなくても、最終的には認められます。", "xiang": "上の人に従うことで、良い結果につながります。"},
            "4": {"text": "争いをやめて、本来あるべき道に戻ることが吉です。心を落ち着けて、正しい道を選び直す時期です。", "xiang": "本来の道に戻ることで、過ちを避けられます。"},
            "5": {"text": "正しい立場から争うことで、大きな吉を得られます。中庸を保ち、正しい位置にいることが重要です。", "xiang": "中心にいて正しい位置にあることが、良い結果を生みます。"},
            "6": {"text": "争いに勝っても、その成果は長く保てません。勝利を誇示しすぎると、かえって失うものが増えます。", "xiang": "争いで得たものは、敬意を集めにくいです。"}
        }
    },
    "7": {
        "judgment": "組織やチームを率いる時期です。経験と人徳のあるリーダーのもとで動くことで、良い結果が期待できます。",
        "tuan": "正しい統率のもとで多くの人を導けば、大きな力となり、周囲もついてきます。危険な状況でも、順序立てて動けば成功につながります。",
        "xiang": "人々を育て、組織をまとめる力が求められる時期です。包容力を持って人材を活かすことが大切です。",
        "lines": {
            "1": {"text": "規律に従って動くことが大切です。ルールを無視すると、問題が生じやすくなります。", "xiang": "秩序を失うと、凶を招きます。"},
            "2": {"text": "チームの中心にいることで、良い結果が生まれます。上からの信頼を得て、大きな役割を担えます。", "xiang": "天の恵みを受け、多くの国や人々を思いやる心が必要です。"},
            "3": {"text": "リーダーが複数いると、うまくいきません。指揮系統を明確にすることが成功への鍵です。", "xiang": "リーダーが多すぎると、成果が上がりません。"},
            "4": {"text": "戦略的に退くことも、賢明な判断です。無理に前進せず、態勢を整える時期だと考えてください。", "xiang": "通常のやり方を守っていれば、問題ありません。"},
            "5": {"text": "問題があれば対処し、経験ある人に任せることが吉です。若手に重要な役割を任せすぎると、問題が生じやすくなります。", "xiang": "経験者が率いることで、正しい方向に進めます。"},
            "6": {"text": "大きな成功の後は、成果を正しく分配することが大切です。貢献した人を適切に評価することで、組織が安定します。", "xiang": "成果を正しく分配することで功績が認められます。小人を重用すると混乱を招きます。"}
        }
    },
    "8": {
        "judgment": "人との結びつきが重要な時期です。自分自身を見つめ直し、徳を高めることで、自然と良い仲間が集まってきます。遅れて参加しようとすると、うまくいきにくいです。",
        "tuan": "下が上に従い、助け合う形です。中心にいる強い存在に皆が応じ、良い結果が生まれます。タイミングを逃すと、その恩恵を受けられません。",
        "xiang": "古代の王は、国々を治め、諸侯との親しい関係を築きました。信頼関係を大切にする時期です。",
        "lines": {
            "1": {"text": "誠実さを持って人と結びつくことで、良い結果が生まれます。心からの誠意があれば、思わぬ幸運も訪れます。", "xiang": "誠実な結びつきには、他の良いことも伴います。"},
            "2": {"text": "内面から自然に結びつこうとする姿勢が吉です。自分を見失わないことが大切です。", "xiang": "内から結びつくことで、自分らしさを保てます。"},
            "3": {"text": "結びつくべきでない相手と関わると、問題が生じます。相手を選ぶ目を持つことが重要です。", "xiang": "ふさわしくない相手との結びつきは、傷つく原因になります。"},
            "4": {"text": "外にいる賢い人と結びつくことが吉です。正しい道を歩む人についていくことで、良い方向に進めます。", "xiang": "上にいる賢者に従うことで、良い結果が生まれます。"},
            "5": {"text": "開かれた姿勢で人と結びつくことが吉です。無理に追わず、自然と集まる関係を大切にすることで、良い結果につながります。", "xiang": "中心にあって正しい位置にいることが、良い結果を生みます。"},
            "6": {"text": "最初から信頼関係を築く姿勢がなければ、良い結果は生まれません。スタートの姿勢が大切です。", "xiang": "始まりがなければ、良い終わりもありません。"}
        }
    },
    "9": {
        "judgment": "力を少しずつ蓄える時期です。大きな動きはまだできませんが、準備を進めることで、やがて成果につながります。",
        "tuan": "柔らかいものが中心にあり、周囲と調和しています。力を蓄えながらも、まだ大きく動く時ではありません。着実に準備を進めることが大切です。",
        "xiang": "内面の徳を磨き、外見を整える時期です。地道な努力が、後の大きな成果につながります。",
        "lines": {
            "1": {"text": "自分の道に戻って進むことが吉です。正しい方向に向かっていれば、問題ありません。", "xiang": "自分の道を歩み続けることが、良い結果につながります。"},
            "2": {"text": "引き寄せられて正しい道に戻ることで、吉が生まれます。中道を保つことで、過ちを避けられます。", "xiang": "中心にいて、自分を見失わないことが大切です。"},
            "3": {"text": "パートナーとの関係がぎくしゃくしやすい時期です。お互いの期待が噛み合わないことがあるかもしれません。", "xiang": "関係を正しく保つことが難しい時期です。"},
            "4": {"text": "誠実さがあれば、危険は去り、心配も解消されます。上の人と志が合っていることで、問題を避けられます。", "xiang": "上と志が一致していれば、心配は不要です。"},
            "5": {"text": "誠実さを持って周囲と結びつくことで、豊かさが生まれます。自分だけでなく、周りも巻き込んで進む時期です。", "xiang": "一人で富むのではなく、周囲と共に豊かになることが大切です。"},
            "6": {"text": "成果が実り、進むべき道が定まりました。ただし、頂点に達した後は慎重さが必要です。無理に進むと問題が生じやすくなります。", "xiang": "力が十分に蓄積されました。ただし、慎重に進まないと障害に遭いやすいです。"}
        }
    },
    "10": {
        "judgment": "虎の尾を踏むような危険な状況でも、慎重に行動すれば噛まれずに済みます。礼儀と節度を守ることで、前に進めます。",
        "tuan": "柔らかさが強さの上を歩む形です。喜びを持って強さに応じることで、危険を避けながら進めます。中心にいて正しい位置にあれば、輝かしい道が開けます。",
        "xiang": "上下の区別をわきまえ、人々の志を安定させることが大切な時期です。秩序を保つことで、混乱を避けられます。",
        "lines": {
            "1": {"text": "慣れた道を歩み続けることで、問題なく前に進めます。派手なことより堅実さが吉につながります。", "xiang": "自分の望む道を一人で歩むことが、良い結果を生みます。"},
            "2": {"text": "平坦で広い道を静かに歩む人が吉を得ます。正しい道を保つことで、心が乱れません。", "xiang": "中道を保ち、自分を乱さないことが大切です。"},
            "3": {"text": "自分の能力を過信すると、危険を招きます。実力以上のことをしようとすると、問題が生じやすいです。", "xiang": "能力不足なのに進もうとすると、適切な対応ができません。"},
            "4": {"text": "危険な状況でも、慎重に注意深く行動すれば、最終的には良い結果になります。用心を怠らないことが大切です。", "xiang": "慎重に行動すれば、目的を達成できます。"},
            "5": {"text": "決断力を持って進むことで成果を得られますが、その分慎重さも必要です。正しい位置にいることで、力を発揮できます。", "xiang": "正しい位置にいながら決断することが求められます。"},
            "6": {"text": "これまでの歩みを振り返り、その結果を見極めることで、大きな吉が生まれます。最高の位置で大きな喜びを得られます。", "xiang": "最上位にいることで、大きな祝福があります。"}
        }
    }
}

# Load original data
with open('/Users/hideakimacbookair/Library/Mobile Documents/com~apple~CloudDocs/易経変化ロジックDB/data/reference/iching_texts_ctext_legge.json', 'r', encoding='utf-8') as f:
    original = json.load(f)

# Load current ja data  
with open('/Users/hideakimacbookair/Library/Mobile Documents/com~apple~CloudDocs/易経変化ロジックDB/data/reference/iching_texts_ctext_legge_ja.json', 'r', encoding='utf-8') as f:
    ja_data = json.load(f)

# Add hexagrams 6-10 with translations
for hex_num in ["6", "7", "8", "9", "10"]:
    if hex_num not in ja_data["hexagrams"]:
        hex_data = copy.deepcopy(original["hexagrams"][hex_num])
        trans = TRANSLATIONS[hex_num]
        
        hex_data["judgment"]["modern_ja"] = trans["judgment"]
        hex_data["tuan"]["modern_ja"] = trans["tuan"]
        hex_data["xiang"]["modern_ja"] = trans["xiang"]
        
        for line_num, line_trans in trans["lines"].items():
            if line_num in hex_data["lines"]:
                hex_data["lines"][line_num]["modern_ja"] = line_trans["text"]
                if "xiang" in hex_data["lines"][line_num]:
                    hex_data["lines"][line_num]["xiang"]["modern_ja"] = line_trans["xiang"]
        
        ja_data["hexagrams"][hex_num] = hex_data
        print(f"Added hexagram {hex_num}")

# Save
with open('/Users/hideakimacbookair/Library/Mobile Documents/com~apple~CloudDocs/易経変化ロジックDB/data/reference/iching_texts_ctext_legge_ja.json', 'w', encoding='utf-8') as f:
    json.dump(ja_data, f, ensure_ascii=False, indent=2)

print(f"Total hexagrams now: {len(ja_data['hexagrams'])}")
